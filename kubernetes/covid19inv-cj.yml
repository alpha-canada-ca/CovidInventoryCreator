apiVersion: batch/v1beta1
kind: CronJob
metadata:
  name: covidinventorycreator
spec:
  schedule: "0 1 * * *"
  jobTemplate:
    spec:
      template:
        spec:
          containers:
          - name: covidinventorycreator
            image: tbsacr.azurecr.io/covidinventorycreator:1.0.0
            imagePullPolicy: Always
          restartPolicy: OnFailure
          resources:
            limits:
              cpu: 1000m
              memory: 3Gi
            requests:
              cpu: 512m
              memory: 256m
          volumeMounts:
          - name: import
            mountPath: /app/data
        restartPolicy: OnFailure
        volumes:
        - azureFile:
          secretName: covid19-storage
          shareName: covid19-inv
          name: data
